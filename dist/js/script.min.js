"use strict";var _dominteractions=require("./dominteractions.js"),_requests=require("./requests.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var r,n,o,i,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return n=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){n=!0,o=e},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),i=0,{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}var mainBtn=document.querySelector(".main-btn"),dropdownMenu=document.querySelector(".dropdown-menu"),TvMaze=(mainBtn.addEventListener("click",function(){dropdownMenu.classList.toggle("transform-class")}),_createClass(function e(){var c=this;_classCallCheck(this,e),_defineProperty(this,"initializeApp",function(){c.connectDOMElements(),c.setupListeners(),c.fetchAndDisplayShows()}),_defineProperty(this,"connectDOMElements",function(){var e=Array.from(document.querySelectorAll("[id]")).map(function(e){return e.id}),t=Array.from(document.querySelectorAll("[data-genre]")).map(function(e){return e.dataset.genre});c.viewElems=(0,_dominteractions.mapListToDOMElements)(e,"id"),c.showNameButtons=(0,_dominteractions.mapListToDOMElements)(t,"data-genre")}),_defineProperty(this,"setupListeners",function(){Object.keys(c.showNameButtons).forEach(function(e){return c.showNameButtons[e].addEventListener("click",c.setCurrentFilterByName)})}),_defineProperty(this,"setCurrentFilterByName",function(e){c.selectedName=e.target.dataset.genre,c.fetchAndDisplayShows()}),_defineProperty(this,"fetchAndDisplayShows",function(){(0,_requests.getShowsByKey)(c.selectedName).then(function(e){return c.renderCardsOnList(e)})}),_defineProperty(this,"renderCardsOnList",function(e){Array.from(document.querySelectorAll("[data-show-id]")).forEach(function(e){return e.removeEventListener("click",c.openDetailsView)}),c.viewElems.showsWrapper.innerHTML="";var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var n=t.value.show,o=c.createShowCard(n);c.viewElems.showsWrapper.append(o)}}catch(e){r.e(e)}finally{r.f()}}),_defineProperty(this,"openDetailsView",function(e){e=e.target.dataset.showId;(0,_requests.getShowById)(e).then(function(e){e=c.createShowCard(e,!0);c.viewElems.showPreview.append(e),c.viewElems.showPreview.style.display="block"})}),_defineProperty(this,"closeDetailsView",function(e){e=e.target.dataset.showId;document.querySelector('[id="showPreview"] [data-show-id="'.concat(e,'"]')).removeEventListener("click",c.closeDetailsView),c.viewElems.showPreview.style.display="none",c.viewElems.showPreview.innerHTML=""}),_defineProperty(this,"createShowCard",function(e,t){var r,n,o=(0,_dominteractions.createDOMElem)("div","card"),i=(0,_dominteractions.createDOMElem)("div","card-text"),a=(0,_dominteractions.createDOMElem)("h5","card-title",e.name),s=(0,_dominteractions.createDOMElem)("button","drop-btn card-btn","Show");return n=e.summary?(n=e.summary.replace(/[<p><b>/]/g,""),t?(0,_dominteractions.createDOMElem)("p",null,n):(0,_dominteractions.createDOMElem)("p",null,"".concat(n.slice(0,200),"..."))):(0,_dominteractions.createDOMElem)("p",null,"There is no description available."),e.image?t?(r=(0,_dominteractions.createDOMElem)("div","card-preview-bg")).style.backgroundImage="url('".concat(e.image.original,"')"):r=(0,_dominteractions.createDOMElem)("img","card-img",null,e.image.medium):r=(0,_dominteractions.createDOMElem)("img","card-img",null,"https://via.placeholder.com/210x295"),s.dataset.showId=e.id,t?(s.addEventListener("click",c.closeDetailsView),s.textContent="Close"):s.addEventListener("click",c.openDetailsView),o.append(r,i,s),i.append(a,n),o}),this.viewElems={},this.showNameButtons={},this.selectedName="speed",this.initializeApp()}));document.addEventListener("DOMContentLoaded",new TvMaze);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJfZG9taW50ZXJhY3Rpb25zIiwicmVxdWlyZSIsIl9yZXF1ZXN0cyIsIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwiZXJyIiwiaSIsIml0IiwicyIsImNhbGwiLCJuIiwic3RlcCIsIm5leHQiLCJkb25lIiwiZSIsIl9lMiIsImYiLCJBcnJheSIsImlzQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJsZW5ndGgiLCJGIiwidmFsdWUiLCJfZSIsIlR5cGVFcnJvciIsIm1pbkxlbiIsIl9hcnJheUxpa2VUb0FycmF5IiwiT2JqZWN0IiwidG9TdHJpbmciLCJzbGljZSIsIm5hbWUiLCJmcm9tIiwidGVzdCIsImFyciIsImxlbiIsImFycjIiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImRlZmluZVByb3BlcnR5IiwiX3RvUHJvcGVydHlLZXkiLCJrZXkiLCJfY3JlYXRlQ2xhc3MiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiX2RlZmluZVByb3BlcnR5IiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwiTnVtYmVyIiwicmVzIiwibWFpbkJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImRyb3Bkb3duTWVudSIsIlR2TWF6ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfdGhpcyIsInRoaXMiLCJzZXR1cExpc3RlbmVycyIsImZldGNoQW5kRGlzcGxheVNob3dzIiwibGlzdE9mSWRzIiwicXVlcnlTZWxlY3RvckFsbCIsIm1hcCIsImVsZW0iLCJpZCIsImRhdGFzZXQiLCJnZW5yZSIsInZpZXdFbGVtcyIsInNob3dOYW1lQnV0dG9ucyIsIm1hcExpc3RUb0RPTUVsZW1lbnRzIiwibGlzdE9mR2VucmUiLCJrZXlzIiwiZm9yRWFjaCIsInNldEN1cnJlbnRGaWx0ZXJCeU5hbWUiLCJzZWxlY3RlZE5hbWUiLCJnZXRTaG93c0J5S2V5IiwidGhlbiIsInNob3dzIiwiYnRuIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9wZW5EZXRhaWxzVmlldyIsInNob3dzV3JhcHBlciIsImlubmVySFRNTCIsIl9pdGVyYXRvciIsIl9zdGVwIiwiY2FyZCIsImNyZWF0ZVNob3dDYXJkIiwic2hvdyIsImFwcGVuZCIsImV2ZW50Iiwic2hvd0lkIiwiZ2V0U2hvd0J5SWQiLCJzaG93UHJldmlldyIsImNvbmNhdCIsImNsb3NlRGV0YWlsc1ZpZXciLCJzdHlsZSIsImRpc3BsYXkiLCJjcmVhdGVET01FbGVtIiwiaW1nIiwicGFyYWdyYXBoIiwiYnV0dG9uIiwic3VtbWFyeSIsImlzRGV0YWlsZWQiLCJzdW1tYXJ5QWZ0ZXIiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJpbWFnZSIsIm9yaWdpbmFsIiwiY2FyZFRleHQiLCJtZWRpdW0iLCJ0ZXh0Q29udGVudCIsImRpdkNhcmQiLCJoIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFBQSxpQkFBQUMsUUFBQSxzQkFBQSxFQUNBQyxVQUFBRCxRQUFBLGVBQUEsRUFBMkQsU0FBQUUsUUFBQUMsR0FBQSxPQUFBRCxRQUFBLFlBQUEsT0FBQUUsUUFBQSxVQUFBLE9BQUFBLE9BQUFDLFNBQUEsU0FBQUYsR0FBQSxPQUFBLE9BQUFBLENBQUEsRUFBQSxTQUFBQSxHQUFBLE9BQUFBLEdBQUEsWUFBQSxPQUFBQyxRQUFBRCxFQUFBRyxjQUFBRixRQUFBRCxJQUFBQyxP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LEtBQU1ULGFBQWtCLFFBQ3hCUyxLQUFNTixjQUFlRixDQUVyQkQsQ0FBQUEsR0E2SUFDLFNBQVNJLGlCQUFpQixtQkFBb0IsSUFBSUQsTUFBUSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWFwTGlzdFRvRE9NRWxlbWVudHMsIGNyZWF0ZURPTUVsZW0gfSBmcm9tICcuL2RvbWludGVyYWN0aW9ucy5qcyc7XG5pbXBvcnQgeyBnZXRTaG93QnlJZCwgZ2V0U2hvd3NCeUtleSB9IGZyb20gJy4vcmVxdWVzdHMuanMnO1xuXG5jb25zdCBtYWluQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tYnRuJyk7XG5jb25zdCBkcm9wZG93bk1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tbWVudScpO1xuXG5tYWluQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRkcm9wZG93bk1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgndHJhbnNmb3JtLWNsYXNzJyk7XG59KTtcblxuY2xhc3MgVHZNYXplIHtcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy52aWV3RWxlbXMgPSB7fTtcblx0XHR0aGlzLnNob3dOYW1lQnV0dG9ucyA9IHt9O1xuXHRcdHRoaXMuc2VsZWN0ZWROYW1lID0gJ3NwZWVkJztcblx0XHR0aGlzLmluaXRpYWxpemVBcHAoKTtcblx0fVxuXG5cdGluaXRpYWxpemVBcHAgPSAoKSA9PiB7XG5cdFx0dGhpcy5jb25uZWN0RE9NRWxlbWVudHMoKTtcblx0XHR0aGlzLnNldHVwTGlzdGVuZXJzKCk7XG5cdFx0dGhpcy5mZXRjaEFuZERpc3BsYXlTaG93cygpO1xuXHR9O1xuXG5cdGNvbm5lY3RET01FbGVtZW50cyA9ICgpID0+IHtcblx0XHRjb25zdCBsaXN0T2ZJZHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZF0nKSkubWFwKFxuXHRcdFx0KGVsZW0pID0+IGVsZW0uaWRcblx0XHQpO1xuXHRcdGNvbnN0IGxpc3RPZkdlbnJlID0gQXJyYXkuZnJvbShcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWdlbnJlXScpXG5cdFx0KS5tYXAoKGVsZW0pID0+IGVsZW0uZGF0YXNldC5nZW5yZSk7XG5cblx0XHR0aGlzLnZpZXdFbGVtcyA9IG1hcExpc3RUb0RPTUVsZW1lbnRzKGxpc3RPZklkcywgJ2lkJyk7XG5cdFx0dGhpcy5zaG93TmFtZUJ1dHRvbnMgPSBtYXBMaXN0VG9ET01FbGVtZW50cyhsaXN0T2ZHZW5yZSwgJ2RhdGEtZ2VucmUnKTtcblx0fTtcblxuXHRzZXR1cExpc3RlbmVycyA9ICgpID0+IHtcblx0XHRPYmplY3Qua2V5cyh0aGlzLnNob3dOYW1lQnV0dG9ucykuZm9yRWFjaCgoZ2VucmUpID0+XG5cdFx0XHR0aGlzLnNob3dOYW1lQnV0dG9uc1tnZW5yZV0uYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdFx0J2NsaWNrJyxcblx0XHRcdFx0dGhpcy5zZXRDdXJyZW50RmlsdGVyQnlOYW1lXG5cdFx0XHQpXG5cdFx0KTtcblx0fTtcblxuXHRzZXRDdXJyZW50RmlsdGVyQnlOYW1lID0gKGUpID0+IHtcblx0XHR0aGlzLnNlbGVjdGVkTmFtZSA9IGUudGFyZ2V0LmRhdGFzZXQuZ2VucmU7XG5cdFx0dGhpcy5mZXRjaEFuZERpc3BsYXlTaG93cygpO1xuXHR9O1xuXG5cdGZldGNoQW5kRGlzcGxheVNob3dzID0gKCkgPT4ge1xuXHRcdGdldFNob3dzQnlLZXkodGhpcy5zZWxlY3RlZE5hbWUpLnRoZW4oKHNob3dzKSA9PlxuXHRcdFx0dGhpcy5yZW5kZXJDYXJkc09uTGlzdChzaG93cylcblx0XHQpO1xuXHR9O1xuXG5cdHJlbmRlckNhcmRzT25MaXN0ID0gKHNob3dzKSA9PiB7XG5cdFx0QXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zaG93LWlkXScpKS5mb3JFYWNoKChidG4pID0+XG5cdFx0XHRidG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5EZXRhaWxzVmlldylcblx0XHQpO1xuXHRcdHRoaXMudmlld0VsZW1zLnNob3dzV3JhcHBlci5pbm5lckhUTUwgPSAnJztcblxuXHRcdGZvciAoY29uc3QgeyBzaG93IH0gb2Ygc2hvd3MpIHtcblx0XHRcdGNvbnN0IGNhcmQgPSB0aGlzLmNyZWF0ZVNob3dDYXJkKHNob3cpO1xuXHRcdFx0dGhpcy52aWV3RWxlbXMuc2hvd3NXcmFwcGVyLmFwcGVuZChjYXJkKTtcblx0XHR9XG5cdH07XG5cblx0b3BlbkRldGFpbHNWaWV3ID0gKGV2ZW50KSA9PiB7XG5cdFx0Y29uc3QgeyBzaG93SWQgfSA9IGV2ZW50LnRhcmdldC5kYXRhc2V0O1xuXG5cdFx0Z2V0U2hvd0J5SWQoc2hvd0lkKS50aGVuKChzaG93KSA9PiB7XG5cdFx0XHRjb25zdCBjYXJkID0gdGhpcy5jcmVhdGVTaG93Q2FyZChzaG93LCB0cnVlKTtcblx0XHRcdHRoaXMudmlld0VsZW1zLnNob3dQcmV2aWV3LmFwcGVuZChjYXJkKTtcblx0XHRcdHRoaXMudmlld0VsZW1zLnNob3dQcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGNsb3NlRGV0YWlsc1ZpZXcgPSAoZXZlbnQpID0+IHtcblx0XHRjb25zdCB7IHNob3dJZCB9ID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQ7XG5cdFx0Y29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0YFtpZD1cInNob3dQcmV2aWV3XCJdIFtkYXRhLXNob3ctaWQ9XCIke3Nob3dJZH1cIl1gXG5cdFx0KTtcblx0XHRjbG9zZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2VEZXRhaWxzVmlldyk7XG5cdFx0dGhpcy52aWV3RWxlbXMuc2hvd1ByZXZpZXcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHR0aGlzLnZpZXdFbGVtcy5zaG93UHJldmlldy5pbm5lckhUTUwgPSAnJztcblx0fTtcblxuXHRjcmVhdGVTaG93Q2FyZCA9IChzaG93LCBpc0RldGFpbGVkKSA9PiB7XG5cdFx0Y29uc3QgZGl2Q2FyZCA9IGNyZWF0ZURPTUVsZW0oJ2RpdicsICdjYXJkJyk7XG5cdFx0Y29uc3QgY2FyZFRleHQgPSBjcmVhdGVET01FbGVtKCdkaXYnLCAnY2FyZC10ZXh0Jyk7XG5cdFx0Y29uc3QgaCA9IGNyZWF0ZURPTUVsZW0oJ2g1JywgJ2NhcmQtdGl0bGUnLCBzaG93Lm5hbWUpO1xuXHRcdGNvbnN0IGJ1dHRvbiA9IGNyZWF0ZURPTUVsZW0oJ2J1dHRvbicsICdkcm9wLWJ0biBjYXJkLWJ0bicsICdTaG93Jyk7XG5cdFx0bGV0IHBhcmFncmFwaDtcblx0XHRsZXQgaW1nO1xuXG5cdFx0aWYgKHNob3cuc3VtbWFyeSkge1xuXHRcdFx0Y29uc3Qgc3VtbWFyeUFmdGVyID0gc2hvdy5zdW1tYXJ5LnJlcGxhY2UoL1s8cD48Yj4vXS9nLCAnJyk7XG5cdFx0XHRpZiAoaXNEZXRhaWxlZCkge1xuXHRcdFx0XHRwYXJhZ3JhcGggPSBjcmVhdGVET01FbGVtKCdwJywgbnVsbCwgc3VtbWFyeUFmdGVyKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBhcmFncmFwaCA9IGNyZWF0ZURPTUVsZW0oXG5cdFx0XHRcdFx0J3AnLFxuXHRcdFx0XHRcdG51bGwsXG5cdFx0XHRcdFx0YCR7c3VtbWFyeUFmdGVyLnNsaWNlKDAsIDIwMCl9Li4uYFxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRwYXJhZ3JhcGggPSBjcmVhdGVET01FbGVtKFxuXHRcdFx0XHQncCcsXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdCdUaGVyZSBpcyBubyBkZXNjcmlwdGlvbiBhdmFpbGFibGUuJ1xuXHRcdFx0KTtcblx0XHR9XG5cblx0XHRpZiAoc2hvdy5pbWFnZSkge1xuXHRcdFx0aWYgKGlzRGV0YWlsZWQpIHtcblx0XHRcdFx0aW1nID0gY3JlYXRlRE9NRWxlbSgnZGl2JywgJ2NhcmQtcHJldmlldy1iZycpO1xuXHRcdFx0XHRpbWcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgnJHtzaG93LmltYWdlLm9yaWdpbmFsfScpYDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGltZyA9IGNyZWF0ZURPTUVsZW0oJ2ltZycsICdjYXJkLWltZycsIG51bGwsIHNob3cuaW1hZ2UubWVkaXVtKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aW1nID0gY3JlYXRlRE9NRWxlbShcblx0XHRcdFx0J2ltZycsXG5cdFx0XHRcdCdjYXJkLWltZycsXG5cdFx0XHRcdG51bGwsXG5cdFx0XHRcdCdodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vMjEweDI5NSdcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0YnV0dG9uLmRhdGFzZXQuc2hvd0lkID0gc2hvdy5pZDtcblxuXHRcdGlmIChpc0RldGFpbGVkKSB7XG5cdFx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlRGV0YWlsc1ZpZXcpO1xuXHRcdFx0YnV0dG9uLnRleHRDb250ZW50ID0gXCJDbG9zZVwiXG5cdFx0fSBlbHNlIHtcblx0XHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlbkRldGFpbHNWaWV3KTtcblx0XHR9XG5cblx0XHRkaXZDYXJkLmFwcGVuZChpbWcsIGNhcmRUZXh0LCBidXR0b24pO1xuXHRcdGNhcmRUZXh0LmFwcGVuZChoLCBwYXJhZ3JhcGgpO1xuXG5cdFx0cmV0dXJuIGRpdkNhcmQ7XG5cdH07XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBuZXcgVHZNYXplKCkpO1xuIl19
