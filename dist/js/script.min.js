"use strict";var _dominteractions=require("./dominteractions.js"),_requests=require("./requests.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _createForOfIteratorHelper(e,t){var r,n,i,o,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return n=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){n=!0,i=e},f:function(){try{r||null==a.return||a.return()}finally{if(n)throw i}}};if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}var mainBtn=document.querySelector(".main-btn"),dropdownMenu=document.querySelector(".dropdown-menu"),TvMaze=(mainBtn.addEventListener("click",function(){dropdownMenu.classList.toggle("transform-class")}),dropdownMenu.addEventListener("click",function(){dropdownMenu.classList.remove("transform-class")}),_createClass(function e(){var c=this;_classCallCheck(this,e),_defineProperty(this,"initializeApp",function(){c.connectDOMElements(),c.setupListeners(),c.fetchAndDisplayShows()}),_defineProperty(this,"connectDOMElements",function(){var e=Array.from(document.querySelectorAll("[id]")).map(function(e){return e.id}),t=Array.from(document.querySelectorAll("[data-genre]")).map(function(e){return e.dataset.genre});c.viewElems=(0,_dominteractions.mapListToDOMElements)(e,"id"),c.showNameButtons=(0,_dominteractions.mapListToDOMElements)(t,"data-genre")}),_defineProperty(this,"setupListeners",function(){Object.keys(c.showNameButtons).forEach(function(e){return c.showNameButtons[e].addEventListener("click",c.setCurrentFilterByName)}),c.showNameButtons.search.addEventListener("click",c.setCurrentFilterByInput),c.viewElems.searchInput.addEventListener("keydown",c.setCurrentFilterByInput)}),_defineProperty(this,"setCurrentFilterByInput",function(){"click"!==event.type&&"Enter"!==event.key||(c.selectedName=c.viewElems.searchInput.value,c.fetchAndDisplayShows(),c.viewElems.searchInput.value="")}),_defineProperty(this,"setCurrentFilterByName",function(e){c.selectedName=e.target.dataset.genre,c.fetchAndDisplayShows()}),_defineProperty(this,"fetchAndDisplayShows",function(){(0,_requests.getShowsByKey)(c.selectedName).then(function(e){return c.renderCardsOnList(e)})}),_defineProperty(this,"renderCardsOnList",function(e){Array.from(document.querySelectorAll("[data-show-id]")).forEach(function(e){return e.removeEventListener("click",c.openDetailsView)}),c.viewElems.showsWrapper.innerHTML="";var t,r=_createForOfIteratorHelper(e);try{for(r.s();!(t=r.n()).done;){var n=t.value.show,i=c.createShowCard(n);c.viewElems.showsWrapper.append(i)}}catch(e){r.e(e)}finally{r.f()}}),_defineProperty(this,"openDetailsView",function(e){e=e.target.dataset.showId;(0,_requests.getShowById)(e).then(function(e){var t=0<(t=e.genres).length?"Genre: "+t.join(", "):"Genre: Unknown",r=e.runtime?"Runtime: "+e.runtime+"min":"Runtime: Unknown",n=(e.premiered?a="Premiered: "+e.premiered:(a="Premiered: Unknown",n="Ended: Unknown"),e.ended?"Ended: "+e.ended:"Ended: -"),i=(0,_dominteractions.createDOMElem)("div","info-div"),r=(0,_dominteractions.createDOMElem)("p","info",r),t=(0,_dominteractions.createDOMElem)("p","info",t),o=(0,_dominteractions.createDOMElem)("p","info","Language: "+e.language),a=(0,_dominteractions.createDOMElem)("p","info",a),n=(0,_dominteractions.createDOMElem)("p","info",n),r=(i.append(r,t,o,a,n),c.createShowCard(e,!0));r.insertBefore(i,r.children[2]),c.viewElems.showPreview.append(r),c.viewElems.showPreview.style.display="block"})}),_defineProperty(this,"closeDetailsView",function(e){e=e.target.dataset.showId;document.querySelector('[id="showPreview"] [data-show-id="'.concat(e,'"]')).removeEventListener("click",c.closeDetailsView),c.viewElems.showPreview.style.display="none",c.viewElems.showPreview.innerHTML=""}),_defineProperty(this,"createShowCard",function(e,t){var r,n,i=(0,_dominteractions.createDOMElem)("div","card"),o=(0,_dominteractions.createDOMElem)("div","card-text"),a=(0,_dominteractions.createDOMElem)("h5","card-title",e.name),s=(0,_dominteractions.createDOMElem)("button","drop-btn card-btn","Show");return n=e.summary?(n=e.summary.replace(/<\/?[^>]+(>|$)/g,""),t?(0,_dominteractions.createDOMElem)("p",null,n):(0,_dominteractions.createDOMElem)("p",null,"".concat(n.slice(0,200),"..."))):(0,_dominteractions.createDOMElem)("p",null,"There is no description available."),e.image?t?(r=(0,_dominteractions.createDOMElem)("div","card-preview-bg")).style.backgroundImage="url('".concat(e.image.original,"')"):r=(0,_dominteractions.createDOMElem)("img","card-img",null,e.image.medium):r=(0,_dominteractions.createDOMElem)("img","card-img",null,"https://via.placeholder.com/210x295"),s.dataset.showId=e.id,t?(s.addEventListener("click",c.closeDetailsView),s.textContent="Close"):s.addEventListener("click",c.openDetailsView),i.append(r,o,s),o.append(a,n),i}),this.viewElems={},this.showNameButtons={},this.selectedName="",this.initializeApp()}));document.addEventListener("DOMContentLoaded",new TvMaze);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJfZG9taW50ZXJhY3Rpb25zIiwicmVxdWlyZSIsIl9yZXF1ZXN0cyIsIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwiZXJyIiwiaSIsIml0IiwicyIsImNhbGwiLCJuIiwic3RlcCIsIm5leHQiLCJkb25lIiwiZSIsIl9lMiIsImYiLCJBcnJheSIsImlzQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJsZW5ndGgiLCJGIiwidmFsdWUiLCJfZSIsIlR5cGVFcnJvciIsIm1pbkxlbiIsIl9hcnJheUxpa2VUb0FycmF5IiwiT2JqZWN0IiwidG9TdHJpbmciLCJzbGljZSIsIm5hbWUiLCJmcm9tIiwidGVzdCIsImFyciIsImxlbiIsImFycjIiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImRlZmluZVByb3BlcnR5IiwiX3RvUHJvcGVydHlLZXkiLCJrZXkiLCJfY3JlYXRlQ2xhc3MiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiX2RlZmluZVByb3BlcnR5IiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwiTnVtYmVyIiwicmVzIiwibWFpbkJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImRyb3Bkb3duTWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJUdk1hemUiLCJfdGhpcyIsImNvbm5lY3RET01FbGVtZW50cyIsInNldHVwTGlzdGVuZXJzIiwiZmV0Y2hBbmREaXNwbGF5U2hvd3MiLCJ0aGlzIiwibGlzdE9mSWRzIiwicXVlcnlTZWxlY3RvckFsbCIsIm1hcCIsImVsZW0iLCJpZCIsImxpc3RPZkdlbnJlIiwidmlld0VsZW1zIiwibWFwTGlzdFRvRE9NRWxlbWVudHMiLCJzaG93TmFtZUJ1dHRvbnMiLCJrZXlzIiwiZm9yRWFjaCIsInNldEN1cnJlbnRGaWx0ZXJCeU5hbWUiLCJzZWFyY2giLCJzZXRDdXJyZW50RmlsdGVyQnlJbnB1dCIsInNlYXJjaElucHV0IiwiZXZlbnQiLCJzZWxlY3RlZE5hbWUiLCJnZXRTaG93c0J5S2V5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRoZW4iLCJzaG93cyIsInJlbmRlckNhcmRzT25MaXN0IiwiYnRuIiwib3BlbkRldGFpbHNWaWV3Iiwic2hvd3NXcmFwcGVyIiwiaW5uZXJIVE1MIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJzaG93IiwiY2FyZCIsImNyZWF0ZVNob3dDYXJkIiwiYXBwZW5kIiwicHJlbWllcmVkIiwiZGF0YXNldCIsImdldFNob3dCeUlkIiwiZ2VucmUiLCJnZW5yZXMiLCJydW50aW1lIiwiam9pbiIsImVuZGVkIiwiaW5mb0RpdiIsInJ1bnRpbWVQYXJhZ3JhcGgiLCJwcmVtaWVyZWRQYXJhZ3JhcGgiLCJlbmRlZFBhcmFncmFwaCIsImRpc3BsYXkiLCJjcmVhdGVET01FbGVtIiwiZ2VucmVQYXJhZ3JhcGgiLCJsYW5ndWFnZVBhcmFncmFwaCIsImNsb3NlQnRuIiwic2hvd1ByZXZpZXciLCJkaXZDYXJkIiwiaXNEZXRhaWxlZCIsInBhcmFncmFwaCIsInN0eWxlIiwic2hvd0lkIiwiaW1nIiwiYnV0dG9uIiwiY2xvc2VEZXRhaWxzVmlldyIsImNhcmRUZXh0Iiwic3VtbWFyeUFmdGVyIiwic3VtbWFyeSIsInJlcGxhY2UiLCJjb25jYXQiLCJpbWFnZSIsImJhY2tncm91bmRJbWFnZSIs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QU1qQixFQUFLbUMsTUFBTUcsTUFBTSxFQUcvRFgsR0FBTSxFQUFBVixpQkFBQUEsZUFDTCxNQUNBLFdBQ0EsS0FDQSxxQ0FBcUMsRUFJdkNXLEVBQU92QixRQUFRcUIsT0FBUzFCLEVBQUt4QixHQUV6QitDLEdBQ0hLLEVBQU9sRSxpQkFBaUIsUUFBU0ssRUFBSzhELGdCQUFnQixFQUN0REQsRUFBT1csWUFBYyxTQUVyQlgsRUFBT2xFLGlCQUFpQixRQUFTSyxFQUFLNEIsZUFBZSxFQUd0RDJCLEVBQVFuQixPQUFPd0IsRUFBS0csRUFBVUYsQ0FBTSxFQUNwQ0UsRUFBUzNCLE9BQU9xQyxFQUFHaEIsQ0FBUyxFQUVyQkYsQ0FDUixDQUFDLEVBL01GaEUsS0FBT29CLFVBQUNoQixHQUNQRCxLQUFBQSxnQkFBdUJHLEdBQ3RCTyxLQUFBaUIsYUFBQSxHQUVGM0IsS0FBQUEsY0FBYUMsQ0FVWixDQVRBRCxHQTZNREYsU0FBU0csaUJBQWlCLG1CQUFvQixJQUFJSSxNQUFRIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXBMaXN0VG9ET01FbGVtZW50cywgY3JlYXRlRE9NRWxlbSB9IGZyb20gJy4vZG9taW50ZXJhY3Rpb25zLmpzJztcbmltcG9ydCB7IGdldFNob3dCeUlkLCBnZXRTaG93c0J5S2V5IH0gZnJvbSAnLi9yZXF1ZXN0cy5qcyc7XG5cbmNvbnN0IG1haW5CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1idG4nKTtcbmNvbnN0IGRyb3Bkb3duTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1tZW51Jyk7XG5cbm1haW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdGRyb3Bkb3duTWVudS5jbGFzc0xpc3QudG9nZ2xlKCd0cmFuc2Zvcm0tY2xhc3MnKTtcbn0pO1xuXG5kcm9wZG93bk1lbnUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdGRyb3Bkb3duTWVudS5jbGFzc0xpc3QucmVtb3ZlKCd0cmFuc2Zvcm0tY2xhc3MnKTtcbn0pO1xuXG5jbGFzcyBUdk1hemUge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLnZpZXdFbGVtcyA9IHt9O1xuXHRcdHRoaXMuc2hvd05hbWVCdXR0b25zID0ge307XG5cdFx0dGhpcy5zZWxlY3RlZE5hbWUgPSAnJztcblx0XHR0aGlzLmluaXRpYWxpemVBcHAoKTtcblx0fVxuXG5cdGluaXRpYWxpemVBcHAgPSAoKSA9PiB7XG5cdFx0dGhpcy5jb25uZWN0RE9NRWxlbWVudHMoKTtcblx0XHR0aGlzLnNldHVwTGlzdGVuZXJzKCk7XG5cdFx0dGhpcy5mZXRjaEFuZERpc3BsYXlTaG93cygpO1xuXHR9O1xuXG5cdGNvbm5lY3RET01FbGVtZW50cyA9ICgpID0+IHtcblx0XHRjb25zdCBsaXN0T2ZJZHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tpZF0nKSkubWFwKFxuXHRcdFx0KGVsZW0pID0+IGVsZW0uaWRcblx0XHQpO1xuXHRcdGNvbnN0IGxpc3RPZkdlbnJlID0gQXJyYXkuZnJvbShcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWdlbnJlXScpXG5cdFx0KS5tYXAoKGVsZW0pID0+IGVsZW0uZGF0YXNldC5nZW5yZSk7XG5cblx0XHR0aGlzLnZpZXdFbGVtcyA9IG1hcExpc3RUb0RPTUVsZW1lbnRzKGxpc3RPZklkcywgJ2lkJyk7XG5cdFx0dGhpcy5zaG93TmFtZUJ1dHRvbnMgPSBtYXBMaXN0VG9ET01FbGVtZW50cyhsaXN0T2ZHZW5yZSwgJ2RhdGEtZ2VucmUnKTtcblx0fTtcblxuXHRzZXR1cExpc3RlbmVycyA9ICgpID0+IHtcblx0XHRPYmplY3Qua2V5cyh0aGlzLnNob3dOYW1lQnV0dG9ucykuZm9yRWFjaCgoZ2VucmUpID0+XG5cdFx0XHR0aGlzLnNob3dOYW1lQnV0dG9uc1tnZW5yZV0uYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdFx0J2NsaWNrJyxcblx0XHRcdFx0dGhpcy5zZXRDdXJyZW50RmlsdGVyQnlOYW1lXG5cdFx0XHQpXG5cdFx0KTtcblxuXHRcdHRoaXMuc2hvd05hbWVCdXR0b25zLnNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFxuXHRcdFx0J2NsaWNrJyxcblx0XHRcdHRoaXMuc2V0Q3VycmVudEZpbHRlckJ5SW5wdXRcblx0XHQpO1xuXHRcdHRoaXMudmlld0VsZW1zLnNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLnNldEN1cnJlbnRGaWx0ZXJCeUlucHV0KTtcblx0fTtcblxuXHRzZXRDdXJyZW50RmlsdGVyQnlJbnB1dCA9ICgpID0+IHtcblx0XHRpZiAoZXZlbnQudHlwZSA9PT0gJ2NsaWNrJyB8fCBldmVudC5rZXkgPT09ICdFbnRlcicpIHtcblx0XHRcdHRoaXMuc2VsZWN0ZWROYW1lID0gdGhpcy52aWV3RWxlbXMuc2VhcmNoSW5wdXQudmFsdWU7XG5cdFx0XHR0aGlzLmZldGNoQW5kRGlzcGxheVNob3dzKCk7XG5cdFx0XHR0aGlzLnZpZXdFbGVtcy5zZWFyY2hJbnB1dC52YWx1ZSA9ICcnO1xuXHRcdH1cblx0fTtcblxuXHRzZXRDdXJyZW50RmlsdGVyQnlOYW1lID0gKGUpID0+IHtcblx0XHR0aGlzLnNlbGVjdGVkTmFtZSA9IGUudGFyZ2V0LmRhdGFzZXQuZ2VucmU7XG5cdFx0dGhpcy5mZXRjaEFuZERpc3BsYXlTaG93cygpO1xuXHR9O1xuXG5cdGZldGNoQW5kRGlzcGxheVNob3dzID0gKCkgPT4ge1xuXHRcdGdldFNob3dzQnlLZXkodGhpcy5zZWxlY3RlZE5hbWUpLnRoZW4oKHNob3dzKSA9PlxuXHRcdFx0dGhpcy5yZW5kZXJDYXJkc09uTGlzdChzaG93cylcblx0XHQpO1xuXHR9O1xuXG5cdHJlbmRlckNhcmRzT25MaXN0ID0gKHNob3dzKSA9PiB7XG5cdFx0QXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1zaG93LWlkXScpKS5mb3JFYWNoKChidG4pID0+XG5cdFx0XHRidG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5EZXRhaWxzVmlldylcblx0XHQpO1xuXHRcdHRoaXMudmlld0VsZW1zLnNob3dzV3JhcHBlci5pbm5lckhUTUwgPSAnJztcblxuXHRcdGZvciAoY29uc3QgeyBzaG93IH0gb2Ygc2hvd3MpIHtcblx0XHRcdGNvbnN0IGNhcmQgPSB0aGlzLmNyZWF0ZVNob3dDYXJkKHNob3cpO1xuXHRcdFx0dGhpcy52aWV3RWxlbXMuc2hvd3NXcmFwcGVyLmFwcGVuZChjYXJkKTtcblx0XHR9XG5cdH07XG5cblx0b3BlbkRldGFpbHNWaWV3ID0gKGV2ZW50KSA9PiB7XG5cdFx0Y29uc3QgeyBzaG93SWQgfSA9IGV2ZW50LnRhcmdldC5kYXRhc2V0O1xuXG5cdFx0Z2V0U2hvd0J5SWQoc2hvd0lkKS50aGVuKChzaG93KSA9PiB7XG5cdFx0XHRsZXQgZ2VucmUgPSBzaG93LmdlbnJlcztcblx0XHRcdGxldCBydW50aW1lO1xuXHRcdFx0bGV0IHByZW1pZXJlZDtcblx0XHRcdGxldCBlbmRlZDtcblxuXHRcdFx0aWYgKGdlbnJlLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Z2VucmUgPSAnR2VucmU6ICcgKyBnZW5yZS5qb2luKCcsICcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Z2VucmUgPSAnR2VucmU6IFVua25vd24nO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoc2hvdy5ydW50aW1lKSB7XG5cdFx0XHRcdHJ1bnRpbWUgPSAnUnVudGltZTogJyArIHNob3cucnVudGltZSArICdtaW4nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cnVudGltZSA9ICdSdW50aW1lOiBVbmtub3duJztcblx0XHRcdH1cblxuXHRcdFx0aWYgKHNob3cucHJlbWllcmVkKSB7XG5cdFx0XHRcdHByZW1pZXJlZCA9ICdQcmVtaWVyZWQ6ICcgKyBzaG93LnByZW1pZXJlZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHByZW1pZXJlZCA9ICdQcmVtaWVyZWQ6IFVua25vd24nO1xuXHRcdFx0XHRlbmRlZCA9ICdFbmRlZDogVW5rbm93bic7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChzaG93LmVuZGVkKSB7XG5cdFx0XHRcdGVuZGVkID0gJ0VuZGVkOiAnICsgc2hvdy5lbmRlZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVuZGVkID0gJ0VuZGVkOiAtJztcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgaW5mb0RpdiA9IGNyZWF0ZURPTUVsZW0oJ2RpdicsICdpbmZvLWRpdicpO1xuXHRcdFx0Y29uc3QgcnVudGltZVBhcmFncmFwaCA9IGNyZWF0ZURPTUVsZW0oJ3AnLCAnaW5mbycsIHJ1bnRpbWUpO1xuXHRcdFx0Y29uc3QgZ2VucmVQYXJhZ3JhcGggPSBjcmVhdGVET01FbGVtKCdwJywgJ2luZm8nLCBnZW5yZSk7XG5cdFx0XHRjb25zdCBsYW5ndWFnZVBhcmFncmFwaCA9IGNyZWF0ZURPTUVsZW0oXG5cdFx0XHRcdCdwJyxcblx0XHRcdFx0J2luZm8nLFxuXHRcdFx0XHQnTGFuZ3VhZ2U6ICcgKyBzaG93Lmxhbmd1YWdlXG5cdFx0XHQpO1xuXHRcdFx0Y29uc3QgcHJlbWllcmVkUGFyYWdyYXBoID0gY3JlYXRlRE9NRWxlbSgncCcsICdpbmZvJywgcHJlbWllcmVkKTtcblx0XHRcdGNvbnN0IGVuZGVkUGFyYWdyYXBoID0gY3JlYXRlRE9NRWxlbSgncCcsICdpbmZvJywgZW5kZWQpO1xuXG5cdFx0XHRpbmZvRGl2LmFwcGVuZChcblx0XHRcdFx0cnVudGltZVBhcmFncmFwaCxcblx0XHRcdFx0Z2VucmVQYXJhZ3JhcGgsXG5cdFx0XHRcdGxhbmd1YWdlUGFyYWdyYXBoLFxuXHRcdFx0XHRwcmVtaWVyZWRQYXJhZ3JhcGgsXG5cdFx0XHRcdGVuZGVkUGFyYWdyYXBoXG5cdFx0XHQpO1xuXG5cdFx0XHRjb25zdCBjYXJkID0gdGhpcy5jcmVhdGVTaG93Q2FyZChzaG93LCB0cnVlKTtcblx0XHRcdGNhcmQuaW5zZXJ0QmVmb3JlKGluZm9EaXYsIGNhcmQuY2hpbGRyZW5bMl0pO1xuXG5cdFx0XHR0aGlzLnZpZXdFbGVtcy5zaG93UHJldmlldy5hcHBlbmQoY2FyZCk7XG5cdFx0XHR0aGlzLnZpZXdFbGVtcy5zaG93UHJldmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHR9KTtcblx0fTtcblxuXHRjbG9zZURldGFpbHNWaWV3ID0gKGV2ZW50KSA9PiB7XG5cdFx0Y29uc3QgeyBzaG93SWQgfSA9IGV2ZW50LnRhcmdldC5kYXRhc2V0O1xuXHRcdGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdGBbaWQ9XCJzaG93UHJldmlld1wiXSBbZGF0YS1zaG93LWlkPVwiJHtzaG93SWR9XCJdYFxuXHRcdCk7XG5cdFx0Y2xvc2VCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlRGV0YWlsc1ZpZXcpO1xuXHRcdHRoaXMudmlld0VsZW1zLnNob3dQcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0dGhpcy52aWV3RWxlbXMuc2hvd1ByZXZpZXcuaW5uZXJIVE1MID0gJyc7XG5cdH07XG5cblx0Y3JlYXRlU2hvd0NhcmQgPSAoc2hvdywgaXNEZXRhaWxlZCkgPT4ge1xuXHRcdGNvbnN0IGRpdkNhcmQgPSBjcmVhdGVET01FbGVtKCdkaXYnLCAnY2FyZCcpO1xuXHRcdGNvbnN0IGNhcmRUZXh0ID0gY3JlYXRlRE9NRWxlbSgnZGl2JywgJ2NhcmQtdGV4dCcpO1xuXHRcdGNvbnN0IGggPSBjcmVhdGVET01FbGVtKCdoNScsICdjYXJkLXRpdGxlJywgc2hvdy5uYW1lKTtcblx0XHRjb25zdCBidXR0b24gPSBjcmVhdGVET01FbGVtKCdidXR0b24nLCAnZHJvcC1idG4gY2FyZC1idG4nLCAnU2hvdycpO1xuXHRcdGxldCBwYXJhZ3JhcGg7XG5cdFx0bGV0IGltZztcblxuXHRcdGlmIChzaG93LnN1bW1hcnkpIHtcblx0XHRcdGNvbnN0IHN1bW1hcnlBZnRlciA9IHNob3cuc3VtbWFyeS5yZXBsYWNlKC88XFwvP1tePl0rKD58JCkvZywgJycpO1xuXHRcdFx0aWYgKGlzRGV0YWlsZWQpIHtcblx0XHRcdFx0cGFyYWdyYXBoID0gY3JlYXRlRE9NRWxlbSgncCcsIG51bGwsIHN1bW1hcnlBZnRlcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwYXJhZ3JhcGggPSBjcmVhdGVET01FbGVtKFxuXHRcdFx0XHRcdCdwJyxcblx0XHRcdFx0XHRudWxsLFxuXHRcdFx0XHRcdGAke3N1bW1hcnlBZnRlci5zbGljZSgwLCAyMDApfS4uLmBcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cGFyYWdyYXBoID0gY3JlYXRlRE9NRWxlbShcblx0XHRcdFx0J3AnLFxuXHRcdFx0XHRudWxsLFxuXHRcdFx0XHQnVGhlcmUgaXMgbm8gZGVzY3JpcHRpb24gYXZhaWxhYmxlLidcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0aWYgKHNob3cuaW1hZ2UpIHtcblx0XHRcdGlmIChpc0RldGFpbGVkKSB7XG5cdFx0XHRcdGltZyA9IGNyZWF0ZURPTUVsZW0oJ2RpdicsICdjYXJkLXByZXZpZXctYmcnKTtcblx0XHRcdFx0aW1nLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7c2hvdy5pbWFnZS5vcmlnaW5hbH0nKWA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpbWcgPSBjcmVhdGVET01FbGVtKCdpbWcnLCAnY2FyZC1pbWcnLCBudWxsLCBzaG93LmltYWdlLm1lZGl1bSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGltZyA9IGNyZWF0ZURPTUVsZW0oXG5cdFx0XHRcdCdpbWcnLFxuXHRcdFx0XHQnY2FyZC1pbWcnLFxuXHRcdFx0XHRudWxsLFxuXHRcdFx0XHQnaHR0cHM6Ly92aWEucGxhY2Vob2xkZXIuY29tLzIxMHgyOTUnXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGJ1dHRvbi5kYXRhc2V0LnNob3dJZCA9IHNob3cuaWQ7XG5cblx0XHRpZiAoaXNEZXRhaWxlZCkge1xuXHRcdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZURldGFpbHNWaWV3KTtcblx0XHRcdGJ1dHRvbi50ZXh0Q29udGVudCA9ICdDbG9zZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlbkRldGFpbHNWaWV3KTtcblx0XHR9XG5cblx0XHRkaXZDYXJkLmFwcGVuZChpbWcsIGNhcmRUZXh0LCBidXR0b24pO1xuXHRcdGNhcmRUZXh0LmFwcGVuZChoLCBwYXJhZ3JhcGgpO1xuXG5cdFx0cmV0dXJuIGRpdkNhcmQ7XG5cdH07XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBuZXcgVHZNYXplKCkpO1xuIl19
